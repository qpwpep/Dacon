# @package data
train_path: data/train.csv
test_path: data/test.csv
sample_submission_path: data/sample_submission.csv

target_col: completed
id_col: ID

# Drop columns whose missing rate (computed on train) is strictly greater than this threshold
drop_missing_threshold: 0.95

# Optional: also drop constant columns (nunique <= 1 on train)
drop_constant_cols: true

# (개선) 고결측 컬럼을 드랍하기 전에 '값이 존재했는가'만 남기는 플래그를 생성
missing_present_flags:
  enable: true
  suffix: "__present"
  skip_all_missing: true


# Treat low-cardinality numeric columns as categorical by casting to string then category
categorical_numeric:
  enable: true
  max_unique: 150          # include coded columns like school1, class1...
  include_bool: true       # whether to include bool cols as categorical
  skip_binary_numeric: true
  # columns that should never be converted to categorical
  exclude:
  - ${data.target_col}
  - ${data.id_col}
  - time_input
  - completed_semester

# Rare bucket: merge infrequent categories (freq < min_freq on train) into "__RARE__"
rare_bucket:
  enable: true
  min_freq: 3
  exclude:
  - ${data.target_col}
  - ${data.id_col}

# Multi-label columns (comma-separated) -> multi-hot (top-K)
multilabel:
  enable: true
  # columns that contain multiple labels in one cell (e.g., "A, B, C")
  cols:
    - desired_job
    - desired_job_except_data
    - certificate_acquisition
    - major_field
    - interested_company
    - expected_domain
    - desired_certificate
    - onedayclass_topic
    # - previous_class_3
    # - previous_class_4
    # - previous_class_5
    # - previous_class_6
    # - previous_class_7
    # - previous_class_8
  sep: ","
  min_freq: 2     # keep tokens that appear >= min_freq in TRAIN
  top_k: 120       # keep only the most frequent top_k tokens per column (set null for no limit)
  # 컬럼별 override (희소도가 큰 컬럼만 더 강하게 컷)
  # - 회사명(interested_company): 자유입력 성격 → min_freq↑, top_k↓로 과적합 방지
  # - 자격증(certificate_acquisition / desired_certificate): 표기 다양성/희소 토큰 많음 → min_freq↑
  # - 도메인(expected_domain): 선택지형(저카디널) → 기본값 유지 + top_k 무제한(null)
  per_col:
    interested_company:
      min_freq: 3
      top_k: 60
    certificate_acquisition:
      min_freq: 3
      top_k: null
    desired_certificate:
      min_freq: 3
      top_k: null
    expected_domain:
      min_freq: 2
      top_k: null
  add_other: true # <col>__ml_other: 1 if any token is outside vocab
  add_count: true # <col>__ml_count: number of tokens
  drop_original: true
  # 멀티라벨로 생성된 멀티핫/카운트/other 컬럼은 categorical 후보에서 제외
  exclude_generated_from_categorical_numeric: true
  exclude_generated_from_categorical_cols: true

